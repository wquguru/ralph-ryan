## Codebase Patterns

- ReactFlow uses onInit callback with ReactFlowInstance for post-initialization actions
- fitView should be called in onInit for reliable initial viewport fitting
- Type imports from @xyflow/react include ReactFlowInstance for callback typing

---

# Progress Log

## 2026-01-12 - US-001
- Implemented onInit callback to trigger fitView after ReactFlow initialization
- Increased fitViewOptions.padding from 0.2 to 0.3 for better mobile visibility
- Imported ReactFlowInstance type for proper typing
- **Files changed:**
  - flowchart/src/App.tsx
- **Learnings:**
  - ReactFlow's fitView prop alone may not reliably fit view on initial load
  - Using onInit callback with instance.fitView() ensures proper initialization
  - Padding of 0.3 provides better mobile viewport coverage
---

## 2026-01-12 - US-002
- Created useIsMobile hook in src/hooks/useIsMobile.ts
- Uses matchMedia API for efficient detection
- Listens to 'change' event for resize updates
- Returns true when viewport width <= 767px
- **Files changed:**
  - flowchart/src/hooks/useIsMobile.ts (new)
- **Learnings:**
  - matchMedia is more efficient than listening to resize events
  - MediaQueryListEvent provides matches property for state updates
---

## 2026-01-12 - US-003
- Created positions config in src/config/positions.ts
- Desktop positions: wide layout with spread nodes
- Mobile positions: compact vertical layout, max x ~200px
- Mobile note positions: stacked below main flow
- Exported typed PositionsMap for reuse
- **Files changed:**
  - flowchart/src/config/positions.ts (new)
- **Learnings:**
  - Two-column layout works better for mobile than single column for loop nodes
  - Notes should be stacked below main flow on mobile to avoid overlap
---
